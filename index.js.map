{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst MY_API_KEY = \"51560534-ee0888e2507fe11f794ee77c8\";\n\nexport async function getImagesByQuery(query, page = 1) {\n\n    const res = await axios('https://pixabay.com/api/', {\n        params: {\n            key: MY_API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: page,\n            per_page: 15\n        }\n    })\n\n    return res.data;\n    \n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loaderBottom = document.querySelector(\".loader-bottom\");\nconst loadMore = document.querySelector(\".btn-load-more\");\n\n\nexport function createGallery(images) {\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li>\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\"/></a>\n            <div class=\"descr\">\n                <p><span>Likes</span> ${likes}</p>\n                <p><span>Views</span> ${views}</p>\n                <p><span>Comments</span> ${comments}</p>\n                <p><span>Downloads</span> ${downloads}</p>\n            </div>\n        </li>\n    `).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n\n}\n\n\n const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n });\n\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n    lightbox.refresh();\n}\n\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoaderBottom() {\n    loaderBottom.classList.remove(\"hidden\");\n}\n\nexport function hideLoaderBottom() {\n    loaderBottom.classList.add(\"hidden\");\n}\n\n\nexport function showLoadMoreButton() {\n    loadMore.classList.replace(\"hidden\", \"load-more-active\");\n}\n\n\nexport function hideLoadMoreButton() {\n    loadMore.classList.replace(\"load-more-active\", \"hidden\");\n}\n\n\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery } from './js/render-functions.js';\nimport { clearGallery } from './js/render-functions.js';\nimport { showLoader } from './js/render-functions.js';\nimport { hideLoader } from './js/render-functions.js';\nimport { showLoaderBottom } from './js/render-functions.js';\nimport { hideLoaderBottom } from './js/render-functions.js';\nimport { showLoadMoreButton } from './js/render-functions.js';\nimport { hideLoadMoreButton } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\"input\");\nconst loadMore = document.querySelector(\".btn-load-more\");\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMore.addEventListener(\"click\", handleLoadMore);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n\n    const userValueInput = input.value.toLowerCase().trim();\n\n    if (!userValueInput) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Fill in the field!',\n            position: 'topRight'\n        });\n        return;\n    }\n\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n    currentQuery = userValueInput;\n\n\n    getImagesByQuery(currentQuery, currentPage)\n        .then(data => {\n            const images = data.hits;\n            const totalHits = data.totalHits;\n\n            if (images.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight'\n                });\n                return;\n            }\n\n            createGallery(images);\n\n            if (images * 15 >= totalHits) {\n                hideLoadMoreButton();\n                iziToast.info({\n                    title: 'Info',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight'\n                });\n            } else {\n                showLoadMoreButton();\n            }\n        })\n        \n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: error.message,\n                position: 'topRight'\n            });\n             \n        })\n        .finally(() => {\n            hideLoader();\n        });\n\n}\n\nfunction handleLoadMore() {\n    currentPage++;\n    showLoaderBottom();\n\n    loadMore.disabled = true;\n\n    getImagesByQuery(currentQuery, currentPage)\n        .then(data => {\n            createGallery(data.hits);\n\n            if (data.hits * 15 >= totalHits) {\n                hideLoadMoreButton();\n                iziToast.info({\n                    title: 'Info',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight'\n                });\n            }\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: error.message,\n                position: 'topRight'\n            });\n        })\n        .finally(() => {\n            hideLoaderBottom();\n            loadMore.disabled = false;\n        });\n} \n\n"],"names":["MY_API_KEY","getImagesByQuery","query","page","axios","gallery","loader","loaderBottom","loadMore","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoaderBottom","hideLoaderBottom","showLoadMoreButton","hideLoadMoreButton","form","input","currentPage","currentQuery","totalHits","handleSubmit","handleLoadMore","event","userValueInput","iziToast","data","error"],"mappings":"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"}